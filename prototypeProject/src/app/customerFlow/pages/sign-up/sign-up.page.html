<ion-content>
  <div style="margin-left:10%;margin-bottom:32px;margin-top:5%">
    <ion-title style="padding-left:0px;padding-bottom:16px;font-size: x-large;font-weight: bold;">
      Sign Up
    </ion-title>

  </div>

  <div>
    <form [formGroup]="form"  (ngSubmit)="onSignup()" >
      <div>
        <ion-label style="margin-left:10%;color:rgb(255, 57, 57);font-weight: bold;">Email</ion-label>
        <ion-input placeholder="example@email.com" type="text" formControlName="email" [ngClass]="{ 'is-invalid': submitted && f.email.errors }" style="margin-top:8px;"></ion-input>
        <div *ngIf="submitted && f.email.errors" class="invalid-feedback" >
            <div style="margin-left:10%" *ngIf="f.email.errors.required">Email is required</div>
            <div style="margin-left:10%" *ngIf="f.email.errors.email">Please enter a valid email</div>
        </div>
      </div>

      <div style="margin-top:32px;">
        <ion-label style="margin-left:10%;color:rgb(255, 57, 57);font-weight: bold;">First Name</ion-label>
        <ion-input placeholder="John" type="text" formControlName="firstName" [ngClass]="{ 'is-invalid': submitted && f.firstName.errors }" style="margin-top:8px;"></ion-input>
        <div *ngIf="submitted && f.firstName.errors" class="invalid-feedback" >
            <div style="margin-left:10%" *ngIf="f.firstName.errors">First name is required</div>
        </div>
      </div>

      <div style="margin-top:32px;">
        <ion-label style="margin-left:10%;color:rgb(255, 57, 57);font-weight: bold;">Last Name</ion-label>
        <ion-input placeholder="Doe" type="text" formControlName="lastName" [ngClass]="{ 'is-invalid': submitted && f.lastName.errors }" style="margin-top:8px;"></ion-input>
        <div *ngIf="submitted && f.lastName.errors" class="invalid-feedback" >
            <div style="margin-left:10%" *ngIf="f.lastName.errors">Last name is required</div>
        </div>
      </div>

      <div style="margin-top:32px;">
        <ion-label style="margin-left:10%;color:rgb(255, 57, 57);font-weight: bold;">Phone Number</ion-label>
        <ion-input placeholder="Ex. 1234567890" type="text" formControlName="phone" [ngClass]="{ 'is-invalid': submitted && f.phone.errors }" style="margin-top:8px;"></ion-input>
        <div *ngIf="submitted && f.phone.errors" class="invalid-feedback" >
            <div style="margin-left:10%" *ngIf="f.phone.errors.required">Phone number is required</div>
            <div style="margin-left:10%" *ngIf="f.phone.errors.pattern">Phone number must be 10 digits</div>
        </div>
      </div>

      <div style="margin-top:32px;">
        <ion-label style="margin-left:10%;color:rgb(255, 57, 57);font-weight: bold">Password</ion-label>
        <ion-input placeholder="Password" type="password" formControlName="password" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" style="margin-top:8px;" (ngModelChange)="checkPasswords()"></ion-input>
        <div *ngIf="submitted && f.password.errors" class="invalid-feedback">
            <div style="margin-left:10%" *ngIf="f.password.errors.required">Password is required</div>
            <div style="margin-left:10%" *ngIf="f.password.errors.pattern">Password must be at least 6 characters</div>
        </div>
      </div>

      <div style="margin-top:32px;">
        <ion-label style="margin-left:10%;color:rgb(255, 57, 57);font-weight: bold">Confirm Password</ion-label>
        <ion-input placeholder="Password" type="password" formControlName="confirmPassword" [ngClass]="{ 'is-invalid': submitted && f.password.errors }" style="margin-top:8px;" (ngModelChange)="checkPasswords()"></ion-input>
        <div *ngIf="submitted" class="invalid-feedback">
          <div style="margin-left:10%" *ngIf="!validPassword">Confirm Password does not match</div>
        </div>
      </div>

      <div style="margin-top:32px; margin-left: 10%;">
        <ion-checkbox formControlName="tos" (ngModelChange)="updateAgreed(f.tos.value)"></ion-checkbox><ion-label> I agree to the Sushi Bai Kiyoshi <a routerLink="">Terms of Service</a> and <a routerLink="">Privacy Policy</a>.</ion-label>
      </div>
      <br/>
      <div style="text-align: center;">
        <div *ngIf="submitted && !agreedToTOS" class="invalid-feedback">
          <div>Please read and agree to the ToS</div>
        </div>
        <ion-button (click)="onSignup()" class="login" [disabled]="loading">
          <span *ngIf="!loading">Sign Up</span>
          <span *ngIf="loading">Signing Un...&nbsp;</span>
          <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
      </ion-button>
      </div>
      
    <div style="text-align: center;bottom:32px;width:100%;">
      <ion-grid>
        <ion-row>
          <ion-col size="12">
            <ion-label style="color: rgb(170, 170, 170)">Have an Account? </ion-label>
            <a routerLink="/login" style="color:rgb(255, 57, 57);font-weight: bold;">Sign In</a>
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
    </form>
  </div>
  <br/><br/><br/>
</ion-content>
